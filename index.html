<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>MP Card Token Test</title>
</head>
<body>

<h2>Crear Card Token (sandbox MÃ©xico)</h2>

<form id="card-form">

  <div>
    <label>NÃºmero de tarjeta</label><br>
    <input id="cardNumber" value="5031755734530604" />
  </div>

  <div>
    <label>Mes expiraciÃ³n</label><br>
    <input id="cardExpirationMonth" value="11" />
  </div>

  <div>
    <label>AÃ±o expiraciÃ³n</label><br>
    <input id="cardExpirationYear" value="2028" />
  </div>

  <div>
    <label>CÃ³digo de seguridad</label><br>
    <input id="securityCode" value="123" />
  </div>

  <div>
    <label>Nombre del titular</label><br>
    <input id="cardholderName" value="APRO" />
  </div>

  <div>
    <label>Email comprador test</label><br>
    <input id="email" value="comprador_test@email.com" />
  </div>



  <button type="submit">Crear token</button>
</form>

<pre id="result"></pre>

<script src="https://sdk.mercadopago.com/js/v2"></script>

<script>
  // âš ï¸ PUBLIC KEY DEL VENDEDOR
  const mp = new MercadoPago("APP_USR-b5194730-4b15-4ea3-9412-9e471a668821");

  const form = document.getElementById("card-form");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const cardData = {
      cardNumber: document.getElementById("cardNumber").value,
      cardExpirationMonth: document.getElementById("cardExpirationMonth").value,
      cardExpirationYear: document.getElementById("cardExpirationYear").value,
      securityCode: document.getElementById("securityCode").value,
      cardholderName: document.getElementById("cardholderName").value,
      
      cardholderEmail: document.getElementById("email").value,  // ANTES ERA SOLO "email"
    };

    try {
      const result = await mp.createCardToken(cardData);

      document.getElementById("result").textContent =
        JSON.stringify(result, null, 2);

      console.log("CARD TOKEN:", result.id);

      // ðŸ”¥ Este token lo mandas a tu backend
      // fetch("/tu-endpoint", { method: "POST", body: JSON.stringify({ token: result.id }) })

    } catch (err) {
      document.getElementById("result").textContent =
        JSON.stringify(err, null, 2);
    }
  });
</script>

</body>
</html>
